<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from discordjs.guide/command-handling/adding-features.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Jan 2021 09:04:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Additional features | Discord.js Guide</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="../favicon.png">
    <meta name="description" content="A guide made by the community of discord.js for its users.">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#42b983">
    <meta name="twitter:card" content="summary">
    <meta name="og:title" content="Discord.js Guide">
    <meta name="og:description" content="A guide made by the community of discord.js for its users.">
    <meta name="og:type" content="website">
    <meta name="og:url" content="../index.html">
    <meta name="og:locale" content="en_US">
    <meta name="og:image" content="../meta-image.png">
    <link rel="preload" href="../assets/css/0.styles.c81fdb25.css" as="style"><link rel="preload" href="../assets/js/app.1b16820c.js" as="script"><link rel="preload" href="../assets/js/4.58143105.js" as="script"><link rel="preload" href="../assets/js/29.d4774ef2.js" as="script"><link rel="preload" href="../assets/js/16.e90c1593.js" as="script"><link rel="preload" href="../assets/js/22.549d06f2.js" as="script"><link rel="preload" href="../assets/js/6.1ed8886a.js" as="script"><link rel="prefetch" href="../assets/js/1.4966f13b.js"><link rel="prefetch" href="../assets/js/10.d9e5e65a.js"><link rel="prefetch" href="../assets/js/11.4d024292.js"><link rel="prefetch" href="../assets/js/12.0ebfb6b5.js"><link rel="prefetch" href="../assets/js/13.ec6ebc85.js"><link rel="prefetch" href="../assets/js/14.e0c1c3e6.js"><link rel="prefetch" href="../assets/js/15.468032d7.js"><link rel="prefetch" href="../assets/js/17.48dc860b.js"><link rel="prefetch" href="../assets/js/18.66fb5b1b.js"><link rel="prefetch" href="../assets/js/19.267ae342.js"><link rel="prefetch" href="../assets/js/20.c083e492.js"><link rel="prefetch" href="../assets/js/21.c20bf682.js"><link rel="prefetch" href="../assets/js/23.97219136.js"><link rel="prefetch" href="../assets/js/24.597d3784.js"><link rel="prefetch" href="../assets/js/25.e66ea496.js"><link rel="prefetch" href="../assets/js/26.3e94b2e9.js"><link rel="prefetch" href="../assets/js/27.c1f13a28.js"><link rel="prefetch" href="../assets/js/28.7159a662.js"><link rel="prefetch" href="../assets/js/30.90995d89.js"><link rel="prefetch" href="../assets/js/31.de2dcdf7.js"><link rel="prefetch" href="../assets/js/32.a19a8a69.js"><link rel="prefetch" href="../assets/js/33.d3547ea6.js"><link rel="prefetch" href="../assets/js/34.999b3eb5.js"><link rel="prefetch" href="../assets/js/35.8165c07f.js"><link rel="prefetch" href="../assets/js/36.2b277f69.js"><link rel="prefetch" href="../assets/js/37.3ea48fb0.js"><link rel="prefetch" href="../assets/js/38.c2159f22.js"><link rel="prefetch" href="../assets/js/39.50884a19.js"><link rel="prefetch" href="../assets/js/40.a8990f37.js"><link rel="prefetch" href="../assets/js/41.701c8a9b.js"><link rel="prefetch" href="../assets/js/42.b84d3fd9.js"><link rel="prefetch" href="../assets/js/43.5faf8a11.js"><link rel="prefetch" href="../assets/js/44.13615e3c.js"><link rel="prefetch" href="../assets/js/45.487383a0.js"><link rel="prefetch" href="../assets/js/46.9ed01b37.js"><link rel="prefetch" href="../assets/js/47.9f485986.js"><link rel="prefetch" href="../assets/js/48.8f87e54d.js"><link rel="prefetch" href="../assets/js/49.03b932fc.js"><link rel="prefetch" href="../assets/js/5.a0132f30.js"><link rel="prefetch" href="../assets/js/50.6ecc158d.js"><link rel="prefetch" href="../assets/js/51.ed256bb5.js"><link rel="prefetch" href="../assets/js/52.8aa55e0d.js"><link rel="prefetch" href="../assets/js/53.b92566e2.js"><link rel="prefetch" href="../assets/js/54.aa72db74.js"><link rel="prefetch" href="../assets/js/55.43db0b13.js"><link rel="prefetch" href="../assets/js/56.99a95047.js"><link rel="prefetch" href="../assets/js/57.36019a3d.js"><link rel="prefetch" href="../assets/js/58.bbb4a297.js"><link rel="prefetch" href="../assets/js/59.83d011b0.js"><link rel="prefetch" href="../assets/js/60.8138be15.js"><link rel="prefetch" href="../assets/js/61.f92820ad.js"><link rel="prefetch" href="../assets/js/62.ee2671f7.js"><link rel="prefetch" href="../assets/js/63.9ec4fce9.js"><link rel="prefetch" href="../assets/js/64.dde77080.js"><link rel="prefetch" href="../assets/js/65.c59bb07d.js"><link rel="prefetch" href="../assets/js/66.37172aa5.js"><link rel="prefetch" href="../assets/js/67.81b25533.js"><link rel="prefetch" href="../assets/js/68.af678c1d.js"><link rel="prefetch" href="../assets/js/7.97abf805.js"><link rel="prefetch" href="../assets/js/8.1ad597e1.js"><link rel="prefetch" href="../assets/js/9.d00e8d4e.js"><link rel="prefetch" href="../assets/js/vendors_docsearch.d31fbf91.js">
    <link rel="stylesheet" href="../assets/css/0.styles.c81fdb25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="../index.html" class="home-link router-link-active"><!----> <span class="site-name">Discord.js Guide</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <!----> <!----></div></div></div> <!----> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="../index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="../commando/index.html" class="nav-link">
  Commando
</a></div><div class="nav-item"><a href="https://discord.js.org/#/docs/main/stable/general/welcome" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord.js Documentation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/discordjs/guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="../index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="../commando/index.html" class="nav-link">
  Commando
</a></div><div class="nav-item"><a href="https://discord.js.org/#/docs/main/stable/general/welcome" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord.js Documentation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/discordjs/guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../index.html" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="../requesting-more-content.html" class="sidebar-link">Requesting more content</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installations &amp; Preparations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../preparations/index.html" class="sidebar-link">Installing Node.js and discord.js</a></li><li><a href="../preparations/setting-up-a-linter.html" class="sidebar-link">Setting up a linter</a></li><li><a href="../preparations/setting-up-a-bot-application.html" class="sidebar-link">Setting up a bot application</a></li><li><a href="../preparations/adding-your-bot-to-servers.html" class="sidebar-link">Adding your bot to servers</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Creating Your Bot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../creating-your-bot/index.html" class="sidebar-link">Getting your bot up &amp; running</a></li><li><a href="../creating-your-bot/configuration-files.html" class="sidebar-link">Configuration files</a></li><li><a href="../creating-your-bot/adding-more-commands.html" class="sidebar-link">Adding more commands</a></li><li><a href="../creating-your-bot/commands-with-user-input.html" class="sidebar-link">Commands with user input (a.k.a. &quot;arguments&quot;)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Command Handler</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="index.html" aria-current="page" class="sidebar-link">Command handling</a></li><li><a href="dynamic-commands.html" class="sidebar-link">Dynamic commands</a></li><li><a href="adding-features.html" aria-current="page" class="active sidebar-link">Additional features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="adding-features.html#required-arguments" class="sidebar-link">Required arguments</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="adding-features.html#expected-command-usage" class="sidebar-link">Expected command usage</a></li></ul></li><li class="sidebar-sub-header"><a href="adding-features.html#guild-only-commands" class="sidebar-link">Guild only commands</a></li><li class="sidebar-sub-header"><a href="adding-features.html#cooldowns" class="sidebar-link">Cooldowns</a></li><li class="sidebar-sub-header"><a href="adding-features.html#command-aliases" class="sidebar-link">Command aliases</a></li><li class="sidebar-sub-header"><a href="adding-features.html#a-dynamic-help-command" class="sidebar-link">A dynamic help command</a></li><li class="sidebar-sub-header"><a href="adding-features.html#command-permissions" class="sidebar-link">Command permissions</a></li><li class="sidebar-sub-header"><a href="adding-features.html#reloading-commands" class="sidebar-link">Reloading commands</a></li><li class="sidebar-sub-header"><a href="adding-features.html#conclusion" class="sidebar-link">Conclusion</a></li><li class="sidebar-sub-header"><a href="adding-features.html#resulting-code" class="sidebar-link">Resulting code</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Popular Topics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../popular-topics/faq.html" class="sidebar-link">Frequently asked Questions</a></li><li><a href="../popular-topics/embeds.html" class="sidebar-link">Embeds</a></li><li><a href="../popular-topics/errors.html" class="sidebar-link">Errors</a></li><li><a href="../popular-topics/permissions.html" class="sidebar-link">Permissions</a></li><li><a href="../popular-topics/permissions-extended.html" class="sidebar-link">Permissions (extended)</a></li><li><a href="../popular-topics/reactions.html" class="sidebar-link">Reactions</a></li><li><a href="../popular-topics/collectors.html" class="sidebar-link">Collectors</a></li><li><a href="../popular-topics/partials.html" class="sidebar-link">Partial Structures</a></li><li><a href="../popular-topics/intents.html" class="sidebar-link">Gateway Intents</a></li><li><a href="../popular-topics/canvas.html" class="sidebar-link">Image manipulation with Canvas</a></li><li><a href="../popular-topics/webhooks.html" class="sidebar-link">Webhooks</a></li><li><a href="../popular-topics/audit-logs.html" class="sidebar-link">Working with Audit Logs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../miscellaneous/parsing-mention-arguments.html" class="sidebar-link">Parsing mention arguments</a></li><li><a href="../miscellaneous/useful-packages.html" class="sidebar-link">Useful packages</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Databases</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../sequelize/index.html" class="sidebar-link">Storing data with Sequelize</a></li><li><a href="../sequelize/currency.html" class="sidebar-link">Making a Currency System</a></li><li><a href="../keyv/index.html" class="sidebar-link">Storing data with Keyv</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Sharding</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../sharding/index.html" class="sidebar-link">Getting started</a></li><li><a href="../sharding/additional-information.html" class="sidebar-link">Additional information</a></li><li><a href="../sharding/extended.html" class="sidebar-link">Extended changes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>OAuth2</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../oauth2/index.html" class="sidebar-link">Getting started with OAuth2</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Voice</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../voice/index.html" class="sidebar-link">Introduction</a></li><li><a href="../voice/understanding-voice.html" class="sidebar-link">Understanding Voice</a></li><li><a href="../voice/the-basics.html" class="sidebar-link">The Basics</a></li><li><a href="../voice/voice-broadcasts.html" class="sidebar-link">Voice Broadcasts</a></li><li><a href="../voice/optimisation-and-troubleshooting.html" class="sidebar-link">Optimization and Troubleshooting</a></li><li><a href="../voice/receiving-audio.html" class="sidebar-link">Receiving Audio</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Improving Your Dev Environment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../improving-dev-environment/pm2.html" class="sidebar-link">Managing your bot process with PM2</a></li><li><a href="../improving-dev-environment/package-json-scripts.html" class="sidebar-link">Setting up package.json scripts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Additional Information</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../additional-info/notation.html" class="sidebar-link">Understanding notation</a></li><li><a href="../additional-info/es6-syntax.html" class="sidebar-link">ES6 syntax examples</a></li><li><a href="../additional-info/collections.html" class="sidebar-link">Collections</a></li><li><a href="../additional-info/async-await.html" class="sidebar-link">Understanding async/await</a></li><li><a href="../additional-info/rest-api.html" class="sidebar-link">Using a REST API</a></li><li><a href="../additional-info/changes-in-v12.html" class="sidebar-link">Updating from v11 to v12</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="additional-features"><a href="#additional-features" class="header-anchor">#</a> Additional features</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This page is a follow-up and bases its code off of <a href="dynamic-commands.html">the previous page</a>.</p></div> <p>The command handler you've been building so far doesn't do much aside from dynamically load and execute commands. Those two things alone are great, but definitely not the only things you want. Before diving into it, let's do some quick refactoring in preparation.</p> <div class="language-diff extra-class"><pre class="language-diff"><code>	const args = message.content.slice(prefix.length).trim().split(/ +/);
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	const command = args.shift().toLowerCase();
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	const commandName = args.shift().toLowerCase();
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	if (!client.commands.has(command)) return;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	if (!client.commands.has(commandName)) return;
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">	const command = client.commands.get(commandName);
</span></span>
	try {
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		client.commands.get(command).execute(message, args);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		command.execute(message, args);
</span></span>	}
</code></pre></div><p>In this short (but necessary) refactor, you:</p> <ol><li>Renamed the original <code>command</code> variable to <code>commandName</code> (to be descriptive about what it actually is, and so that you can name one of our variables as <code>command</code> later).</li> <li>Changed the following <code>if</code> statement appropriately.</li> <li>Made a variable named <code>command</code> which is the actual command object.</li> <li>Changed the line inside the <code>try/catch</code> statement to use the <code>command</code> variable instead.</li></ol> <p>Now you can start adding features!</p> <h2 id="required-arguments"><a href="#required-arguments" class="header-anchor">#</a> Required arguments</h2> <p>For this section, we'll be using the <code>args-info.js</code> command as an example. If you chose to keep it, it should look like this now:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">'args-info'</span><span class="token punctuation">,</span>
	description<span class="token operator">:</span> <span class="token string">'Information about the arguments provided.'</span><span class="token punctuation">,</span>
	<span class="token function">execute</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You didn't provide any arguments, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Arguments: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\nArguments length: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>This is fine if you only have a few commands that require arguments. However, if you plan on making a lot of commands and don't want to copy &amp; paste that <code>if</code> statement each time, it'd be a smart idea to change that check into something simpler.</p> <p>Here are the changes you'll be making:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	args: true,
</span></span>	execute(message, args) {
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		if (!args.length) {
</span><span class="token prefix deleted">-</span><span class="token line">			return message.channel.send(`You didn't provide any arguments, ${message.author}!`);
</span><span class="token prefix deleted">-</span><span class="token line">		}
</span><span class="token prefix deleted">-</span><span class="token line">		else if (args[0] === 'foo') {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		if (args[0] === 'foo') {
</span></span>			return message.channel.send('bar');
		}
		
		message.channel.send(`Arguments: ${args}\nArguments length: ${args.length}`);
	},
</code></pre></div><p>And then in your main file:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>	const command = client.commands.get(commandName);
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">	if (command.args &amp;&amp; !args.length) {
</span><span class="token prefix inserted">+</span><span class="token line">		return message.channel.send(`You didn't provide any arguments, ${message.author}!`);
</span><span class="token prefix inserted">+</span><span class="token line">	}
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span></code></pre></div><p>Now whenever you set <code>args</code> to <code>true</code> in one of your command files, it'll perform this check and supply feedback if necessary.</p> <h3 id="expected-command-usage"><a href="#expected-command-usage" class="header-anchor">#</a> Expected command usage</h3> <p>It's good UX (user experience) to let the user know that a command requires arguments when they don't provide any (it also prevents your code from breaking). Letting them know what kind of arguments are expected is even better.</p> <p>Here's a simple implementation of such a thing. For this example, pretend you have a <code>!role</code> command, where the first argument is the user to give the role, and the second argument is the name of the role to give them.</p> <p>In your <code>role.js</code> file:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>	args: true,
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	usage: '&lt;user&gt; &lt;role&gt;',
</span></span>	execute(message, args) {
</code></pre></div><p>In your main file:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>	if (command.args &amp;&amp; !args.length) {
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		return message.channel.send(`You didn't provide any arguments, ${message.author}!`);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		let reply = `You didn't provide any arguments, ${message.author}!`;
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">		if (command.usage) {
</span><span class="token prefix inserted">+</span><span class="token line">			reply += `\nThe proper usage would be: \`${prefix}${command.name} ${command.usage}\``;
</span><span class="token prefix inserted">+</span><span class="token line">		}
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">		return message.channel.send(reply);
</span></span>	}
</code></pre></div><p>Use an <code>if</code> statement to check if the <code>usage</code> property exists (and is truthy) first, so that you don't accidentally end up with <code>undefined</code> in the reply string (in the case that you forget to properly supply the property in your command file, or some similar incident). A simple precaution such as this can greatly improve the user experience.</p> <h2 id="guild-only-commands"><a href="#guild-only-commands" class="header-anchor">#</a> Guild only commands</h2> <p>Some commands are meant to be used only inside servers and won't work whatsoever in DMs. A prime example of this would be a kick command. You can add a property to the necessary commands to determine whether or not it should be only available outside of servers.</p> <p>In the kick command you created in an earlier chapter, make the following changes:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>module.exports = {
	name: 'kick',
	description: 'Kick a user from the server.',
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	guildOnly: true,
</span></span></code></pre></div><p>And in your main file, above the args checking line, add this in:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>command<span class="token punctuation">.</span>guildOnly <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'dm'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'I can\'t execute that command inside DMs!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now when you try to use the kick command inside a DM, you'll get the appropriate response which will also prevent your bot from throwing an error.</p> <div class="discord-messages"><div class="discord-message"><div class="discord-author-avatar"><img src="../assets/img/discord-avatar-djs.cfe39c8b.png" alt="User"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				User
			</span> <!----></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		!kick
	 <!----></div> </div></div> <div class="discord-message"><div class="discord-author-avatar"><img src="../../cdn.discordapp.com/attachments/654503812593090602/665721745466195978/blue.png" alt="Tutorial Bot"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				Tutorial Bot
			</span> <span class="discord-bot-tag">
		Bot
	</span></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		I can't execute that command inside DMs!
	 <!----></div> </div></div></div> <h2 id="cooldowns"><a href="#cooldowns" class="header-anchor">#</a> Cooldowns</h2> <p>Spam is something you generally want to avoid - especially if one of your commands requires calls to other APIs, or takes a bit of time to build/send. This is also a very common feature bot developers want to integrate into their projects, so let's get started on that!</p> <p>You'll be using the ping command to test this on. Add in the following bit of code:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>module.exports = {
	name: 'ping',
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	cooldown: 5,
</span></span>	execute(message) {
		message.channel.send('Pong.');
	},
};
</code></pre></div><p>This is the amount (in seconds) that the user will have to wait before being able to properly use that command again. You'll be using Collections again to store what you need.</p> <p>In your main file, add in this line (preferably somewhere above your <code>ready</code> event):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> cooldowns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Discord<span class="token punctuation">.</span>Collection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Again in your main file, directly above the <code>try/catch</code>, add in the following:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cooldowns<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>command<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	cooldowns<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>command<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Discord<span class="token punctuation">.</span>Collection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> timestamps <span class="token operator">=</span> cooldowns<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>command<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cooldownAmount <span class="token operator">=</span> <span class="token punctuation">(</span>command<span class="token punctuation">.</span>cooldown <span class="token operator">||</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>timestamps<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You check if the <code>cooldowns</code> Collection has the command set in it yet. If not, then add it in. Next, 3 variables are created:</p> <ol><li>A variable with the current timestamp.</li> <li>A variable that <code>.get()</code>s the Collection for the triggered command.</li> <li>A variable that gets the necessary cooldown amount. If you don't supply it in your command file, it'll default to 3. Afterwards, convert it to the proper amount of milliseconds.</li></ol> <p>After that, create a simple <code>if</code> statement to check if the <code>timestamps</code> Collection has the author ID in it yet.</p> <p>Continuing with your current setup, this is the complete <code>if</code> statement:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>timestamps<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> expirationTime <span class="token operator">=</span> timestamps<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">+</span> cooldownAmount<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">&lt;</span> expirationTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> timeLeft <span class="token operator">=</span> <span class="token punctuation">(</span>expirationTime <span class="token operator">-</span> now<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">please wait </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timeLeft<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> more second(s) before reusing the \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\` command.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Since the <code>timestamps</code> Collection has the author ID in it, you <code>.get()</code> it and then sum it up with the <code>cooldownAmount</code> variable, in order to get the correct expiration timestamp. You then check to see if it's actually expired or not.</p> <p>If the <code>expirationTime</code> has not passed, you return a message letting the user know how much time is left until they can use that command again. As you will see shortly, the author ID should be deleted from the <code>timestamps</code> Collection upon expiration, but you should take this extra precaution to avoid potential UX problems.</p> <p>Finally, if the <code>timestamps</code> Collection doesn't have the message author's ID (or if the author ID did not get deleted as planned), <code>.set()</code> the author ID with the current timestamp and create a <code>setTimeout()</code> to automatically delete it after the cooldown period has passed:</p> <div class="language-js extra-class"><pre class="language-js"><code>timestamps<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>id<span class="token punctuation">,</span> now<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> timestamps<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span> cooldownAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="command-aliases"><a href="#command-aliases" class="header-anchor">#</a> Command aliases</h2> <p>It's a good idea to allow users to trigger your commands in more than one way; it gives them the freedom of choosing what to send and may even make some command names easier to remember. Luckily, setting up aliases for your commands is quite simple.</p> <p>For this bit of the guide, we'll be using the avatar command as a target. Around Discord, your profile picture is referred to as an &quot;avatar&quot; - however, not everyone calls it that. Some people prefer &quot;icon&quot; or &quot;pfp&quot; (profile picture). With that in mind, let's update the avatar command to allow all 3 of those triggers.</p> <p>Open your <code>avatar.js</code> file and add in the following line:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>module.exports = {
	name: 'avatar',
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	aliases: ['icon', 'pfp'],
</span></span></code></pre></div><p>The <code>aliases</code> property should always contain an array of strings. In your main file, here are the changes you'll need to make:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	if (!client.commands.has(commandName)) return;
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">	const command = client.commands.get(commandName);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	const command = client.commands.get(commandName)
</span><span class="token prefix inserted">+</span><span class="token line">		|| client.commands.find(cmd =&gt; cmd.aliases &amp;&amp; cmd.aliases.includes(commandName));
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">	if (!command) return;
</span></span></code></pre></div><p>Making those two small changes, you get this:</p> <div class="discord-messages"><div class="discord-message"><div class="discord-author-avatar"><img src="../assets/img/discord-avatar-djs.cfe39c8b.png" alt="User"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				User
			</span> <!----></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		!avatar <span class="discord-mention">
	@User</span> <!----></div> </div></div> <div class="discord-message"><div class="discord-author-avatar"><img src="../../cdn.discordapp.com/attachments/654503812593090602/665721745466195978/blue.png" alt="Tutorial Bot"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				Tutorial Bot
			</span> <span class="discord-bot-tag">
		Bot
	</span></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		User's avatar:
		https://cdn.discordapp.com/avatars/328037144868290560/1cc0a3b14aec3499632225c708451d67.png
		<br> <img src="../../cdn.discordapp.com/avatars/328037144868290560/1cc0a3b14aec3499632225c708451d67.png" alt=""> <!----></div> </div></div> <div class="discord-message"><div class="discord-author-avatar"><img src="../assets/img/discord-avatar-djs.cfe39c8b.png" alt="User"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				User
			</span> <!----></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		!icon <span class="discord-mention">
	@User</span> <!----></div> </div></div> <div class="discord-message"><div class="discord-author-avatar"><img src="../../cdn.discordapp.com/attachments/654503812593090602/665721745466195978/blue.png" alt="Tutorial Bot"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				Tutorial Bot
			</span> <span class="discord-bot-tag">
		Bot
	</span></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		User's avatar:
		https://cdn.discordapp.com/avatars/328037144868290560/1cc0a3b14aec3499632225c708451d67.png
		<br> <img src="../../cdn.discordapp.com/avatars/328037144868290560/1cc0a3b14aec3499632225c708451d67.png" alt=""> <!----></div> </div></div></div> <h2 id="a-dynamic-help-command"><a href="#a-dynamic-help-command" class="header-anchor">#</a> A dynamic help command</h2> <p>If you don't use a framework or command handler for your projects, you'll have a tough time setting up an always up-to-date help command. Luckily, that's not the case here. Start by creating a new command file inside your <code>commands</code> folder and populate it as you normally would.</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">'help'</span><span class="token punctuation">,</span>
	description<span class="token operator">:</span> <span class="token string">'List all of my commands or info about a specific command.'</span><span class="token punctuation">,</span>
	aliases<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'commands'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	usage<span class="token operator">:</span> <span class="token string">'[command name]'</span><span class="token punctuation">,</span>
	cooldown<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
	<span class="token function">execute</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// ...</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>You're going to need your prefix variable a couple times inside this command, so make sure to require that at the very top of the file (outside of the <code>module.exports</code> bit).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> prefix <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../config.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Inside the <code>execute()</code> function, set up some variables and an if/else statement to determine whether it should display a list of all the command names or only information about a specific command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> commands <span class="token punctuation">}</span> <span class="token operator">=</span> message<span class="token punctuation">.</span>client<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>
</code></pre></div><p>You can use <code>.push()</code> on the <code>data</code> variable to append the info you want and then DM it to the message author once you're done.</p> <p>Inside the if statement, this is what you'll need:</p> <div class="language-js extra-class"><pre class="language-js"><code>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'Here\'s a list of all my commands:'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>commands<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">command</span> <span class="token operator">=&gt;</span> command<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\nYou can send \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">help [command name]\` to get info on a specific command!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> message<span class="token punctuation">.</span>author<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span> split<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'dm'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
		message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'I\'ve sent you a DM with all my commands!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not send help DM to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>tag<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
		message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'it seems like I can\'t DM you! Do you have DMs disabled?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>There's nothing really complex here; all you do is append some strings, <code>.map()</code> over the <code>commands</code> Collection, and add an additional string to let the user know how to trigger information about a specific command.</p> <p>Since help messages can get messy, you'll be DMing it to the message author instead of posting it in the requested channel. However, there is something very important you should consider: the possibility of not being able to DM the user, whether it be that they have DMs disabled on that server or overall, or they have the bot blocked. For that reason, you should <code>.catch()</code> it and let them know.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you weren't already aware, <code>.send()</code> takes 2 parameters: the content to send, and the message options to pass in. You can read about the <code>MessageOptions</code> type <span style="display:none;"><a href="https://discord.js.org/#/docs/main/v11/typedef/MessageOptions" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span style="display:inline-block;"><a href="https://discord.js.org/#/docs/main/stable/typedef/MessageOptions" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span>. Using <code>split: true</code> here will automatically split our help message into 2 or more messages in the case that it exceeds the 2,000 character limit.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Because the <code>data</code> variable is an array, you can take advantage of discord.js' functionality where it will <code>.join()</code> any array sent with a <code>\n</code> character. If you prefer to not rely on that in the chance that it changes in the future, you can simply append <code>.join('\n')</code> to the end of that yourself.</p></div> <p>Below the <code>if (!args.length)</code> statement is where you'll send the help message for the command they specified.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> command <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">||</span> commands<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>aliases <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>aliases<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>command<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'that\'s not a valid command!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">**Name:** </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>command<span class="token punctuation">.</span>aliases<span class="token punctuation">)</span> data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">**Aliases:** </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>aliases<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>command<span class="token punctuation">.</span>description<span class="token punctuation">)</span> data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">**Description:** </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>command<span class="token punctuation">.</span>usage<span class="token punctuation">)</span> data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">**Usage:** </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>usage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">**Cooldown:** </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>cooldown <span class="token operator">||</span> <span class="token number">3</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> second(s)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span> split<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Once you get the command based off the name or alias they gave, you can start <code>.push()</code>ing what you need into the <code>data</code> variable. Not all commands will have descriptions, aliases, or usage strings, so you use an if statement for each of those to append them conditionally. After that, send back all the relevant information.</p> <p>At the end of it all, you should be getting this as a result:</p> <div class="discord-messages"><div class="discord-message"><div class="discord-author-avatar"><img src="../assets/img/discord-avatar-djs.cfe39c8b.png" alt="User"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				User
			</span> <!----></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		!help
	 <!----></div> </div></div> <div class="discord-message"><div class="discord-author-avatar"><img src="../../cdn.discordapp.com/attachments/654503812593090602/665721745466195978/blue.png" alt="Tutorial Bot"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				Tutorial Bot
			</span> <span class="discord-bot-tag">
		Bot
	</span></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		Here's a list of all my commands:
		args-info, avatar, beep, help, kick, ping, prune, server, user-info	<br>
		You can send `!help [command name]` to get info on a specific command!
	 <!----></div> </div></div> <div class="discord-message"><div class="discord-author-avatar"><img src="../assets/img/discord-avatar-djs.cfe39c8b.png" alt="User"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				User
			</span> <!----></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		!help avatar
	 <!----></div> </div></div> <div class="discord-message"><div class="discord-author-avatar"><img src="../../cdn.discordapp.com/attachments/654503812593090602/665721745466195978/blue.png" alt="Tutorial Bot"></div> <div class="discord-message-content"><div><span class="discord-author-info"><span class="discord-author-username">
				Tutorial Bot
			</span> <span class="discord-bot-tag">
		Bot
	</span></span> <span class="discord-message-timestamp">
				01/08/2021
			</span></div> <div class="discord-message-body"><!----> 
		**Name:** avatar <br>
		**Aliases:** icon,pfp <br>
		**Description:** Get the avatar URL of the tagged user(s), or your own avatar. <br>
		**Cooldown:** 3 second(s)
	 <!----></div> </div></div></div> <p>No more manually editing your help command! If you aren't completely satisfied with how it looks, you can always adjust it to your liking later.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you want to add categories or other information to your commands you can simply add properties reflecting it to your <code>module.exports</code>. If you only want to show a subset of commands remember that <code>commands</code> is a Collection you can <span style="display:none;"><a href="https://discord.js.org/#/docs/main/v11/class/Collection?scrollTo=filter" target="_blank" rel="noopener noreferrer">filter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span style="display:inline-block;"><a href="https://discord.js.org/#/docs/collection/master/class/Collection?scrollTo=filter" target="_blank" rel="noopener noreferrer">filter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span> to fit your specific needs!</p></div> <h2 id="command-permissions"><a href="#command-permissions" class="header-anchor">#</a> Command permissions</h2> <p>In this section you will be adding permission requirements to the command handler we established so far. To do so you need to add at a <code>permissions</code> key to your existing command options. We will use the 'kick' command to demonstrate:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>module.exports = {
	name: 'kick',
	description: 'Kick a user from the server.',
	guildOnly: true,
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	permissions: 'KICK_MEMBERS',
</span></span>	execute(message, args) {
		// ...
	},
};
</code></pre></div><p>You also need to check for those permissions before executing the command, which is done in the main file, as shown below. We use <code>TextChannel#permissionsFor</code> in combination with <code>Permissions#has</code> rather than <code>Guildmember#hasPermission</code> to respect permission overwrites in our check.</p> <div class="language-diff extra-class"><pre class="language-diff"><code>// ...
if (command.guildOnly &amp;&amp; message.channel.type === 'dm') {
	return message.reply('I can\'t execute that command inside DMs!');
}

<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> if (command.permissions) {
</span><span class="token prefix inserted">+</span><span class="token line"> 	const authorPerms = message.channel.permissionsFor(message.author);
</span><span class="token prefix inserted">+</span><span class="token line"> 	if (!authorPerms || !authorPerms.has(command.permissions)) {
</span><span class="token prefix inserted">+</span><span class="token line"> 		return message.reply('You can not do this!');
</span><span class="token prefix inserted">+</span><span class="token line"> 	}
</span><span class="token prefix inserted">+</span><span class="token line"> }
</span></span>
if (command.args &amp;&amp; !args.length) {
// ...
</code></pre></div><p>Your command handler will now refuse to execute commands if the permissions you specify in the command structure are missing from the member trying to use it. Note that the <code>ADMINISTRATOR</code> permission as well as the message author being the owner of the guild will overwrite this.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Need more resources on how Discord's permission system works? Check the <a href="../popular-topics/permissions.html">permissions article</a>, <a href="../popular-topics/permissions-extended.html">extended permissions knowledge base</a> and documentation of <span style="display:none;"><a href="https://discord.js.org/#/docs/main/v11/class/Permissions?scrollTo=s-FLAGS" target="_blank" rel="noopener noreferrer">permission flags<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span style="display:inline-block;"><a href="https://discord.js.org/#/docs/main/stable/class/Permissions?scrollTo=s-FLAGS" target="_blank" rel="noopener noreferrer">permission flags<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span> out!</p></div> <h2 id="reloading-commands"><a href="#reloading-commands" class="header-anchor">#</a> Reloading commands</h2> <p>When writing your commands, you may find it tedious to restart your bot every time you want to test even the slightest change in your code. However, if you have a command handler, reloading commands can be done with a single bot command.</p> <p>Create a new command file and paste in the usual format:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">'reload'</span><span class="token punctuation">,</span>
	description<span class="token operator">:</span> <span class="token string">'Reloads a command'</span><span class="token punctuation">,</span>
	<span class="token function">execute</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// ...</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>In this command, you will be using a command name or alias as the only argument. First off, you need to check if the command you want to reload exists. This can be done in a similar fashion as getting a command in your main file.<br>
Note that you can skip the first line if you use the <a href="adding-features.html#required-arguments">argument checker</a> from above:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You didn't pass any command to reload, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commandName <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> command <span class="token operator">=</span> message<span class="token punctuation">.</span>client<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>commandName<span class="token punctuation">)</span>
	<span class="token operator">||</span> message<span class="token punctuation">.</span>client<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">cmd</span> <span class="token operator">=&gt;</span> cmd<span class="token punctuation">.</span>aliases <span class="token operator">&amp;&amp;</span> cmd<span class="token punctuation">.</span>aliases<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>commandName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>command<span class="token punctuation">)</span> <span class="token keyword">return</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">There is no command with name or alias \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commandName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>A lot of library specific structures have <code>client</code> as a property. That means you don't have to pass the client reference as a parameter to commands to access for example <code>client.guilds</code> or <code>client.commands</code>, but can directly access the respective properties directly from the <code>message</code> object, as shown in the snippet above.</p></div> <p>Now, in theory, all there is to do, is to delete the previous command from <code>client.commands</code> and require the file again. In practice though, you cannot do this that easily as <code>require()</code> caches the file. If you were to require it again, you would simply load the previously cached file without any of your changes. In order to remove the file from the cache, you need to add the following line to your code:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">delete</span> require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>After removing the command from the cache, all you have to do is require the file again and add the freshly loaded command to <code>client.commands</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> newCommand <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	message<span class="token punctuation">.</span>client<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>newCommand<span class="token punctuation">.</span>name<span class="token punctuation">,</span> newCommand<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
	message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">There was an error while reloading a command \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`:\n\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The snippet above uses a <code>try/catch</code> block to load the command file and add it to <code>client.commands</code>. In case of an error it will log the full error to console and notify the user about it with the error's message component <code>error.message</code>. Note the you never actually delete the command from the commands collection, and instead just overwrite it. This prevents you from deleting a command, and ending up with no command at all after a failed <code>require()</code> call, as each use of the reload command checks that collection again.</p> <p>The last slight improvement you might want to add to the try block is sending a message if the reload was successful:</p> <div class="language-js extra-class"><pre class="language-js"><code>message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Command \`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>command<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\` was reloaded!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>At this point of the guide, you should now have a command handler with some very basic (but useful) features! If you see fit, you can expand upon the current structure to make something even better and easier for you to use in the future.</p> <h2 id="resulting-code"><a href="#resulting-code" class="header-anchor">#</a> Resulting code</h2> <p>
	If you want to compare your code to the code we've constructed so far, you can review it over on the GitHub repository
	<a href="https://github.com/discordjs/guide/tree/master/code-samples/" target="_blank" rel="noopener noreferrer">
		here <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/discordjs/guide/edit/master/guide/command-handling/adding-features.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/8/2021, 11:32:01 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="dynamic-commands.html" class="prev">
        Dynamic commands
      </a></span> <span class="next"><a href="../popular-topics/faq.html">
        Frequently asked Questions
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="../assets/js/app.1b16820c.js" defer></script><script src="../assets/js/4.58143105.js" defer></script><script src="../assets/js/29.d4774ef2.js" defer></script><script src="../assets/js/16.e90c1593.js" defer></script><script src="../assets/js/22.549d06f2.js" defer></script><script src="../assets/js/6.1ed8886a.js" defer></script>
  </body>

<!-- Mirrored from discordjs.guide/command-handling/adding-features.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Jan 2021 09:05:00 GMT -->
</html>
