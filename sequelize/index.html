<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from discordjs.guide/sequelize/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Jan 2021 09:05:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Storing data with Sequelize | Discord.js Guide</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="../favicon.png">
    <meta name="description" content="A guide made by the community of discord.js for its users.">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#42b983">
    <meta name="twitter:card" content="summary">
    <meta name="og:title" content="Discord.js Guide">
    <meta name="og:description" content="A guide made by the community of discord.js for its users.">
    <meta name="og:type" content="website">
    <meta name="og:url" content="../index.html">
    <meta name="og:locale" content="en_US">
    <meta name="og:image" content="../meta-image.png">
    <link rel="preload" href="../assets/css/0.styles.c81fdb25.css" as="style"><link rel="preload" href="../assets/js/app.1b16820c.js" as="script"><link rel="preload" href="../assets/js/4.58143105.js" as="script"><link rel="preload" href="../assets/js/59.83d011b0.js" as="script"><link rel="preload" href="../assets/js/22.549d06f2.js" as="script"><link rel="preload" href="../assets/js/6.1ed8886a.js" as="script"><link rel="prefetch" href="../assets/js/1.4966f13b.js"><link rel="prefetch" href="../assets/js/10.d9e5e65a.js"><link rel="prefetch" href="../assets/js/11.4d024292.js"><link rel="prefetch" href="../assets/js/12.0ebfb6b5.js"><link rel="prefetch" href="../assets/js/13.ec6ebc85.js"><link rel="prefetch" href="../assets/js/14.e0c1c3e6.js"><link rel="prefetch" href="../assets/js/15.468032d7.js"><link rel="prefetch" href="../assets/js/16.e90c1593.js"><link rel="prefetch" href="../assets/js/17.48dc860b.js"><link rel="prefetch" href="../assets/js/18.66fb5b1b.js"><link rel="prefetch" href="../assets/js/19.267ae342.js"><link rel="prefetch" href="../assets/js/20.c083e492.js"><link rel="prefetch" href="../assets/js/21.c20bf682.js"><link rel="prefetch" href="../assets/js/23.97219136.js"><link rel="prefetch" href="../assets/js/24.597d3784.js"><link rel="prefetch" href="../assets/js/25.e66ea496.js"><link rel="prefetch" href="../assets/js/26.3e94b2e9.js"><link rel="prefetch" href="../assets/js/27.c1f13a28.js"><link rel="prefetch" href="../assets/js/28.7159a662.js"><link rel="prefetch" href="../assets/js/29.d4774ef2.js"><link rel="prefetch" href="../assets/js/30.90995d89.js"><link rel="prefetch" href="../assets/js/31.de2dcdf7.js"><link rel="prefetch" href="../assets/js/32.a19a8a69.js"><link rel="prefetch" href="../assets/js/33.d3547ea6.js"><link rel="prefetch" href="../assets/js/34.999b3eb5.js"><link rel="prefetch" href="../assets/js/35.8165c07f.js"><link rel="prefetch" href="../assets/js/36.2b277f69.js"><link rel="prefetch" href="../assets/js/37.3ea48fb0.js"><link rel="prefetch" href="../assets/js/38.c2159f22.js"><link rel="prefetch" href="../assets/js/39.50884a19.js"><link rel="prefetch" href="../assets/js/40.a8990f37.js"><link rel="prefetch" href="../assets/js/41.701c8a9b.js"><link rel="prefetch" href="../assets/js/42.b84d3fd9.js"><link rel="prefetch" href="../assets/js/43.5faf8a11.js"><link rel="prefetch" href="../assets/js/44.13615e3c.js"><link rel="prefetch" href="../assets/js/45.487383a0.js"><link rel="prefetch" href="../assets/js/46.9ed01b37.js"><link rel="prefetch" href="../assets/js/47.9f485986.js"><link rel="prefetch" href="../assets/js/48.8f87e54d.js"><link rel="prefetch" href="../assets/js/49.03b932fc.js"><link rel="prefetch" href="../assets/js/5.a0132f30.js"><link rel="prefetch" href="../assets/js/50.6ecc158d.js"><link rel="prefetch" href="../assets/js/51.ed256bb5.js"><link rel="prefetch" href="../assets/js/52.8aa55e0d.js"><link rel="prefetch" href="../assets/js/53.b92566e2.js"><link rel="prefetch" href="../assets/js/54.aa72db74.js"><link rel="prefetch" href="../assets/js/55.43db0b13.js"><link rel="prefetch" href="../assets/js/56.99a95047.js"><link rel="prefetch" href="../assets/js/57.36019a3d.js"><link rel="prefetch" href="../assets/js/58.bbb4a297.js"><link rel="prefetch" href="../assets/js/60.8138be15.js"><link rel="prefetch" href="../assets/js/61.f92820ad.js"><link rel="prefetch" href="../assets/js/62.ee2671f7.js"><link rel="prefetch" href="../assets/js/63.9ec4fce9.js"><link rel="prefetch" href="../assets/js/64.dde77080.js"><link rel="prefetch" href="../assets/js/65.c59bb07d.js"><link rel="prefetch" href="../assets/js/66.37172aa5.js"><link rel="prefetch" href="../assets/js/67.81b25533.js"><link rel="prefetch" href="../assets/js/68.af678c1d.js"><link rel="prefetch" href="../assets/js/7.97abf805.js"><link rel="prefetch" href="../assets/js/8.1ad597e1.js"><link rel="prefetch" href="../assets/js/9.d00e8d4e.js"><link rel="prefetch" href="../assets/js/vendors_docsearch.d31fbf91.js">
    <link rel="stylesheet" href="../assets/css/0.styles.c81fdb25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="../index.html" class="home-link router-link-active"><!----> <span class="site-name">Discord.js Guide</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <!----> <!----></div></div></div> <!----> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="../index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="../commando/index.html" class="nav-link">
  Commando
</a></div><div class="nav-item"><a href="https://discord.js.org/#/docs/main/stable/general/welcome" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord.js Documentation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/discordjs/guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="../index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="../commando/index.html" class="nav-link">
  Commando
</a></div><div class="nav-item"><a href="https://discord.js.org/#/docs/main/stable/general/welcome" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord.js Documentation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/discordjs/guide" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../index.html" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="../requesting-more-content.html" class="sidebar-link">Requesting more content</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installations &amp; Preparations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../preparations/index.html" class="sidebar-link">Installing Node.js and discord.js</a></li><li><a href="../preparations/setting-up-a-linter.html" class="sidebar-link">Setting up a linter</a></li><li><a href="../preparations/setting-up-a-bot-application.html" class="sidebar-link">Setting up a bot application</a></li><li><a href="../preparations/adding-your-bot-to-servers.html" class="sidebar-link">Adding your bot to servers</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Creating Your Bot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../creating-your-bot/index.html" class="sidebar-link">Getting your bot up &amp; running</a></li><li><a href="../creating-your-bot/configuration-files.html" class="sidebar-link">Configuration files</a></li><li><a href="../creating-your-bot/adding-more-commands.html" class="sidebar-link">Adding more commands</a></li><li><a href="../creating-your-bot/commands-with-user-input.html" class="sidebar-link">Commands with user input (a.k.a. &quot;arguments&quot;)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Command Handler</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../command-handling/index.html" class="sidebar-link">Command handling</a></li><li><a href="../command-handling/dynamic-commands.html" class="sidebar-link">Dynamic commands</a></li><li><a href="../command-handling/adding-features.html" class="sidebar-link">Additional features</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Popular Topics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../popular-topics/faq.html" class="sidebar-link">Frequently asked Questions</a></li><li><a href="../popular-topics/embeds.html" class="sidebar-link">Embeds</a></li><li><a href="../popular-topics/errors.html" class="sidebar-link">Errors</a></li><li><a href="../popular-topics/permissions.html" class="sidebar-link">Permissions</a></li><li><a href="../popular-topics/permissions-extended.html" class="sidebar-link">Permissions (extended)</a></li><li><a href="../popular-topics/reactions.html" class="sidebar-link">Reactions</a></li><li><a href="../popular-topics/collectors.html" class="sidebar-link">Collectors</a></li><li><a href="../popular-topics/partials.html" class="sidebar-link">Partial Structures</a></li><li><a href="../popular-topics/intents.html" class="sidebar-link">Gateway Intents</a></li><li><a href="../popular-topics/canvas.html" class="sidebar-link">Image manipulation with Canvas</a></li><li><a href="../popular-topics/webhooks.html" class="sidebar-link">Webhooks</a></li><li><a href="../popular-topics/audit-logs.html" class="sidebar-link">Working with Audit Logs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../miscellaneous/parsing-mention-arguments.html" class="sidebar-link">Parsing mention arguments</a></li><li><a href="../miscellaneous/useful-packages.html" class="sidebar-link">Useful packages</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Databases</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="index.html" aria-current="page" class="active sidebar-link">Storing data with Sequelize</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.html#a-simple-tag-system" class="sidebar-link">A simple tag system</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="index.html#installing-and-using-sequelize" class="sidebar-link">Installing and using Sequelize</a></li><li class="sidebar-sub-header"><a href="index.html#alpha-connection-information" class="sidebar-link">[alpha] Connection information</a></li><li class="sidebar-sub-header"><a href="index.html#beta-creating-the-model" class="sidebar-link">[beta] Creating the model</a></li><li class="sidebar-sub-header"><a href="index.html#gamma-syncing-the-model" class="sidebar-link">[gamma] Syncing the model</a></li><li class="sidebar-sub-header"><a href="index.html#delta-adding-a-tag" class="sidebar-link">[delta] Adding a tag</a></li><li class="sidebar-sub-header"><a href="index.html#epsilon-fetching-a-tag" class="sidebar-link">[epsilon] Fetching a tag</a></li><li class="sidebar-sub-header"><a href="index.html#zeta-editing-a-tag" class="sidebar-link">[zeta] Editing a tag</a></li><li class="sidebar-sub-header"><a href="index.html#theta-display-info-on-a-specific-tag" class="sidebar-link">[theta] Display info on a specific tag</a></li><li class="sidebar-sub-header"><a href="index.html#lambda-listing-all-tags" class="sidebar-link">[lambda] Listing all tags</a></li><li class="sidebar-sub-header"><a href="index.html#mu-deleting-a-tag" class="sidebar-link">[mu] Deleting a tag</a></li></ul></li><li class="sidebar-sub-header"><a href="index.html#resulting-code" class="sidebar-link">Resulting code</a></li></ul></li><li><a href="currency.html" class="sidebar-link">Making a Currency System</a></li><li><a href="../keyv/index.html" class="sidebar-link">Storing data with Keyv</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Sharding</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../sharding/index.html" class="sidebar-link">Getting started</a></li><li><a href="../sharding/additional-information.html" class="sidebar-link">Additional information</a></li><li><a href="../sharding/extended.html" class="sidebar-link">Extended changes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>OAuth2</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../oauth2/index.html" class="sidebar-link">Getting started with OAuth2</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Voice</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../voice/index.html" class="sidebar-link">Introduction</a></li><li><a href="../voice/understanding-voice.html" class="sidebar-link">Understanding Voice</a></li><li><a href="../voice/the-basics.html" class="sidebar-link">The Basics</a></li><li><a href="../voice/voice-broadcasts.html" class="sidebar-link">Voice Broadcasts</a></li><li><a href="../voice/optimisation-and-troubleshooting.html" class="sidebar-link">Optimization and Troubleshooting</a></li><li><a href="../voice/receiving-audio.html" class="sidebar-link">Receiving Audio</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Improving Your Dev Environment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../improving-dev-environment/pm2.html" class="sidebar-link">Managing your bot process with PM2</a></li><li><a href="../improving-dev-environment/package-json-scripts.html" class="sidebar-link">Setting up package.json scripts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Additional Information</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="../additional-info/notation.html" class="sidebar-link">Understanding notation</a></li><li><a href="../additional-info/es6-syntax.html" class="sidebar-link">ES6 syntax examples</a></li><li><a href="../additional-info/collections.html" class="sidebar-link">Collections</a></li><li><a href="../additional-info/async-await.html" class="sidebar-link">Understanding async/await</a></li><li><a href="../additional-info/rest-api.html" class="sidebar-link">Using a REST API</a></li><li><a href="../additional-info/changes-in-v12.html" class="sidebar-link">Updating from v11 to v12</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="storing-data-with-sequelize"><a href="#storing-data-with-sequelize" class="header-anchor">#</a> Storing data with Sequelize</h1> <p>Sequelize is an object-relational-mapper, which means you can write a query using objects and have it run on almost any other database system that Sequelize supports.</p> <h3 id="why-use-an-orm"><a href="#why-use-an-orm" class="header-anchor">#</a> Why use an ORM?</h3> <p>The main benefit of using an ORM like Sequelize is that it allows you to write code that essentially looks like native JavaScript. As a side benefit, an ORM will allow you to write code that can run in almost every database system. Although databases generally adhere very closely to SQL, they each have their own slight nuances and differences. You can create a database-agnostic query using an ORM that works on multiple database systems.</p> <h2 id="a-simple-tag-system"><a href="#a-simple-tag-system" class="header-anchor">#</a> A simple tag system</h2> <p>For this tutorial, you will create a simple tag system. The tag system will allow you to add a tag, output a tag, edit the tag, show tag info, list tags, and delete a tag.<br>
To begin, you should install Sequelize into your discord.js project. We will explain SQlite as the first storage engine and show how to use other databases later. Note that you will need node 7.6 or above to utilize the <code>async/await</code> operators.</p> <h3 id="installing-and-using-sequelize"><a href="#installing-and-using-sequelize" class="header-anchor">#</a> Installing and using Sequelize</h3> <p>Create a new project folder and run the following:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> --save discord.js
$ <span class="token function">npm</span> <span class="token function">install</span> --save sequelize
$ <span class="token function">npm</span> <span class="token function">install</span> --save sqlite3
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>Make sure you use version 5 or later of Sequelize! Version 4 as used in this guide will pose a security threat. You can read more about this issue On the <a href="https://github.com/sequelize/sequelize/issues/7310" target="_blank" rel="noopener noreferrer">Sequelize issue tracker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <p>After you have installed discord.js and Sequelize, you can start with the following skeleton code. The comment labels will tell you where to insert code later on.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Discord <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'discord.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Sequelize <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'sequelize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Discord<span class="token punctuation">.</span>Client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">PREFIX</span> <span class="token operator">=</span> <span class="token string">'!'</span><span class="token punctuation">;</span>

<span class="token comment">// [alpha]</span>
<span class="token comment">// [beta]</span>

client<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// [gamma]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">message</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token constant">PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> input <span class="token operator">=</span> message<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token constant">PREFIX</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> command <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> commandArgs <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'addtag'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// [delta]</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'tag'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// [epsilon]</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'edittag'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// [zeta]</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'taginfo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// [theta]</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'showtags'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// [lambda]</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">'removetag'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// [mu]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">'your-token-goes-here'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="alpha-connection-information"><a href="#alpha-connection-information" class="header-anchor">#</a> [alpha] Connection information</h3> <p>The first step is to define the connection information. It should look something like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sequelize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sequelize</span><span class="token punctuation">(</span><span class="token string">'database'</span><span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	host<span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
	dialect<span class="token operator">:</span> <span class="token string">'sqlite'</span><span class="token punctuation">,</span>
	logging<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token comment">// SQLite only</span>
	storage<span class="token operator">:</span> <span class="token string">'database.sqlite'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>host</code> tells Sequelize where to look for the database. This will be localhost for most systems, as the database usually resides with the application. If you have a remote database however, then you can set it to that connection address. Otherwise, don't touch this unless you know what you're doing.<br> <code>dialect</code> refers to the database engine you are going to use. For this tutorial, it will be sqlite.<br> <code>logging</code> setting this to false disables the verbose output from Sequelize. Set it to true when you are trying to debug.<br> <code>storage</code> is a sqlite-only setting, because sqlite is the only database that stores all its data to a single file.</p> <h3 id="beta-creating-the-model"><a href="#beta-creating-the-model" class="header-anchor">#</a> [beta] Creating the model</h3> <p>In any relational database, you need to create tables in order to store your data. For this simple tag system, four fields will be used. The table in the database will look something like this:</p> <table><thead><tr><th>name</th> <th>description</th> <th>username</th> <th>usage_count</th></tr></thead> <tbody><tr><td>bob</td> <td>is the best</td> <td>bob</td> <td>0</td></tr> <tr><td>tableflip</td> <td>(╯°□°）╯︵ ┻━┻</td> <td>joe</td> <td>8</td></tr></tbody></table> <p>In order to do that in Sequelize, you define a model based on this structure, as shown below.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * equivalent to: CREATE TABLE tags(
 * name VARCHAR(255),
 * description TEXT,
 * username VARCHAR(255),
 * usage INT
 * );
 */</span>
<span class="token keyword">const</span> Tags <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'tags'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token punctuation">{</span>
		type<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
		unique<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	description<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">,</span>
	username<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
	usage_count<span class="token operator">:</span> <span class="token punctuation">{</span>
		type<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">,</span>
		defaultValue<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		allowNull<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The model mirrors very closely to what is defined in the database. There will be a table with 4 fields called <code>name</code>, <code>description</code>, <code>username</code>, and <code>usage_count</code>.<br> <code>sequelize.define()</code> takes two parameters. <code>'tags'</code> is passed as the name of our table, and an object that represents the table's schema in key-value pairs. Keys in the object become the model's attributes, and the values describe the attributes.</p> <p><code>type</code> refers to what kind of data this attribute should hold. The most common types are number, string, and date, but there are other data types that are available depending on the database.<br> <code>unique: true</code> will ensure that this field will never have duplicated entries. Duplicate tag names will be disallowed in this database.<br> <code>defaultValue</code> allows you to set a fallback value if no value is set during the insert.<br> <code>allowNull</code> is not all that important, but this will guarantee in the database that the attribute is never unset. You could potentially set it to be a blank or empty string, but has to be set to <em>something</em>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Sequelize.STRING</code> vs <code>Sequelize.TEXT</code>: In most database systems, the length of the string is a fixed length for performance reasons. Sequelize defaults this to 255. Use STRING if your input has a max length, and use TEXT if does not. For sqlite, there is no unbounded string type so it will not matter which one you pick.</p></div> <h3 id="gamma-syncing-the-model"><a href="#gamma-syncing-the-model" class="header-anchor">#</a> [gamma] Syncing the model</h3> <p>Now that your structure is defined, you need to make sure the model exists in the database. This goes in our <code>.once('ready')</code> event. This way the table structure gets created when the bot is ready and we do not need to worry about it later.</p> <div class="language-js extra-class"><pre class="language-js"><code>Tags<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The table does not actually get created until you <code>sync</code> it. The schema you defined from before was simply creating the model that lets Sequelize know what the data should look like. For testing, you can use <code>Tags.sync({ force: true })</code> to recreate the table every time on startup. This way you can get a blank slate each time.</p> <h3 id="delta-adding-a-tag"><a href="#delta-adding-a-tag" class="header-anchor">#</a> [delta] Adding a tag</h3> <p>After all this preparation, you can now write your first command! We will start off with the ability to add a tag.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> splitArgs <span class="token operator">=</span> commandArgs<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagName <span class="token operator">=</span> splitArgs<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagDescription <span class="token operator">=</span> splitArgs<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token comment">// equivalent to: INSERT INTO tags (name, description, username) values (?, ?, ?);</span>
	<span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		name<span class="token operator">:</span> tagName<span class="token punctuation">,</span>
		description<span class="token operator">:</span> tagDescription<span class="token punctuation">,</span>
		username<span class="token operator">:</span> message<span class="token punctuation">.</span>author<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Tag </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> added.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'SequelizeUniqueConstraintError'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'That tag already exists.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'Something went wrong with adding a tag.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Tags.create()</code> uses the models that you created previously. The <code>.create()</code> method inserts some data into the model. You are going to insert a tag name, description, and the author name into the database.<br> <code>catch (e)</code> This section is necessary for the insert. This will offload checking for duplicates to the database, so that it will notify you if you attempt to create a tag that already exists. The alternative is to query the database before adding data, and checking if a result is returned. If there are no errors, or no identical tag is found, only then should you add the data. Of the two methods it is clear that catching the error is less work for yourself.<br> <code>if (e.name === &quot;SequelizeUniqueConstraintError&quot;)</code> Although this was mostly for doing less work, it is always good to handle your errors, especially if you know what types of errors you will receive. This error comes up if your unique constraint is violated, i.e. someone inserted duplicate values.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Do not use catch for inserting new data. Only use it for gracefully handling things that go wrong in your code, or logging errors.</p></div> <h3 id="epsilon-fetching-a-tag"><a href="#epsilon-fetching-a-tag" class="header-anchor">#</a> [epsilon] Fetching a tag</h3> <p>Next we will explain how to fetch the tag that was just inserted.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> commandArgs<span class="token punctuation">;</span>

<span class="token comment">// equivalent to: SELECT * FROM tags WHERE name = 'tagName' LIMIT 1;</span>
<span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// equivalent to: UPDATE tags SET usage_count = usage_count + 1 WHERE name = 'tagName';</span>
	tag<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string">'usage_count'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'description'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not find tag: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This is your first query. You are finally doing something with our data, yay!<br> <code>.findOne()</code> is how you fetch a single row of data. The <code>where: { name: tagName }</code> makes sure you only get the row with the desired tag. Since the queries are asynchronous, you will need to make use of <code>await</code> in order to fetch it. After receiving the data, you can use <code>.get()</code> on that object to grab the data. If no data is received, then you can tell the user that it was not found.</p> <h3 id="zeta-editing-a-tag"><a href="#zeta-editing-a-tag" class="header-anchor">#</a> [zeta] Editing a tag</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> splitArgs <span class="token operator">=</span> commandArgs<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagName <span class="token operator">=</span> splitArgs<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagDescription <span class="token operator">=</span> splitArgs<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// equivalent to: UPDATE tags (description) values (?) WHERE name='?';</span>
<span class="token keyword">const</span> affectedRows <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> description<span class="token operator">:</span> tagDescription <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>affectedRows <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Tag </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was edited.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not find a tag with name </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>It is possible to edit a record by using the <code>.update()</code> function. The result from the update is the number of rows that were changed by the <code>where</code> condition. Since you can only have tags with unique names, you do not have to worry about how many rows it may change. Should you get that no rows were changed, then it can be concluded that the tag that was trying to be edited did not exist.</p> <h3 id="theta-display-info-on-a-specific-tag"><a href="#theta-display-info-on-a-specific-tag" class="header-anchor">#</a> [theta] Display info on a specific tag</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> commandArgs<span class="token punctuation">;</span>

<span class="token comment">// equivalent to: SELECT * FROM tags WHERE name = 'tagName' LIMIT 1;</span>
<span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was created by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>createdAt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and has been used </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>usage_count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not find tag: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This section is very similar to our previous command, except you will be showing the tag metadata. <code>tag</code> contains our tag object. Notice two things here: firstly, it is possible to access our object properties without the <code>.get()</code> function. This is because the object is an instance of a Tag, which you can treat as an object, and not just a row of data. Second, you can access a property that was not defined explicitly, <code>createdAt</code>. This is because Sequelize automatically adds that column to all tables. This feature can be disabled by passing another object into the model with <code>{ createdAt: false }</code>, but in this case, it was useful to have.</p> <h3 id="lambda-listing-all-tags"><a href="#lambda-listing-all-tags" class="header-anchor">#</a> [lambda] Listing all tags</h3> <p>The next command will enable you to fetch a list of all the tags that were created so far.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// equivalent to: SELECT name FROM tags;</span>
<span class="token keyword">const</span> tagList <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span> attributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagString <span class="token operator">=</span> tagList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'No tags set.'</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> message<span class="token punctuation">.</span>channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">List of tags: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tagString<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Here, you can use the <code>.findAll()</code> method to grab all the tag names. Notice that instead of having <code>where</code>, the optional field, <code>attributes</code>, is set. Setting attributes to name will let you get <em>only</em> the names of tags. If you tried to access other fields, like the tag author, then you would get an error. If left blank, it will fetch <em>all</em> of the associated column data. It will not actually affect the results, but from a performance perspective, you should only grab the data that is needed. If no results are returned, <code>tagString</code> will default to 'No tags set'.</p> <h3 id="mu-deleting-a-tag"><a href="#mu-deleting-a-tag" class="header-anchor">#</a> [mu] Deleting a tag</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tagName <span class="token operator">=</span> commandArgs<span class="token punctuation">;</span>
<span class="token comment">// equivalent to: DELETE from tags WHERE name = ?;</span>
<span class="token keyword">const</span> rowCount <span class="token operator">=</span> <span class="token keyword">await</span> Tags<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> tagName <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rowCount<span class="token punctuation">)</span> <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'That tag did not exist.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">'Tag deleted.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>.destroy()</code> runs the delete operation. The operation returns a count of the number of affected rows. If it returns with a value of 0, then nothing was deleted and that tag did not exist in the database in the first place.</p> <h2 id="resulting-code"><a href="#resulting-code" class="header-anchor">#</a> Resulting code</h2> <p>
	If you want to compare your code to the code we've constructed so far, you can review it over on the GitHub repository
	<a href="https://github.com/discordjs/guide/tree/master/code-samples/" target="_blank" rel="noopener noreferrer">
		here <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/discordjs/guide/edit/master/guide/sequelize/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/29/2020, 10:34:03 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="../miscellaneous/useful-packages.html" class="prev">
        Useful packages
      </a></span> <span class="next"><a href="currency.html">
        Making a Currency System
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="../assets/js/app.1b16820c.js" defer></script><script src="../assets/js/4.58143105.js" defer></script><script src="../assets/js/59.83d011b0.js" defer></script><script src="../assets/js/22.549d06f2.js" defer></script><script src="../assets/js/6.1ed8886a.js" defer></script>
  </body>

<!-- Mirrored from discordjs.guide/sequelize/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Jan 2021 09:05:05 GMT -->
</html>
